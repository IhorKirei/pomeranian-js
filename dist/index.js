!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(global,(()=>(()=>{"use strict";var e={639:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(i,n){function s(e){try{a(o.next(e))}catch(e){n(e)}}function l(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(685)),s=i(r(6)),l=r(987),a=i(r(957)),u=r(593);t.default=class{constructor(){this._req=null,this._res=null,this._settings={},this._router=new a.default}start(e){n.default.createServer(((e,t)=>{this.processRequest(e,t)})).listen(null==e?void 0:e.port,null==e?void 0:e.hostname,null==e?void 0:e.backlog,null==e?void 0:e.callback)}processRequest(e,t){return o(this,void 0,void 0,(function*(){const r=this;if(r._req=e,r._res=t,e.startTime=Date.now(),t.json=function(e,t){u.validate.integer(e)||(0,u.showError)("res.json() invalid status code"),this.statusCode=e,this.setHeader("content-type","application/json; charset=utf-8"),this.end(JSON.stringify(t)),r.finishRequest()},t.html=function(e,t){u.validate.integer(e)||(0,u.showError)("res.html() invalid status code"),this.statusCode=e,this.setHeader("content-type","text/html; charset=utf-8"),t&&this.setHeader("content-length",Buffer.byteLength(t)),this.end(t),r.finishRequest()},t.redirect=function(t,o){t||(0,u.showError)("res.redirect() invalid url for redirecting"),301!==o&&302!==o&&(0,u.showError)("res.redirect() invalid code for redirecting"),this.statusCode=o,this.setHeader("location",`${e.connection.encrypted?"https":"http"}://${e.headers.host}${t}`),this.end(),r.finishRequest()},r._settings.cors&&(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","HEAD,GET,PUT,POST,PATCH,DELETE"),t.setHeader("Access-Control-Allow-Headers","Accept,Authorization,Content-Type,Content-Length,Origin,X-Requested-With"),"OPTIONS"===e.method))return t.html(200);try{const o=yield r._router.parseQuery(e);if(!o)return t.html(404);yield r._router.layers.applyLayers(o.id,e,t),o.callback(e,t)}catch(e){(0,u.showError)(e)}}))}tune(e){u.validate.object(e)||(0,u.showError)("tune() invalid settings");for(let t in e){if("cors"!==t&&"debug"!==t)return(0,u.showError)("tune() invalid name");if(!0!==e[t]&&!1!==e[t])return(0,u.showError)("tune() invalid value, expected boolean");switch(t){case"cors":case"debug":this._settings[t]=e[t]}}}addRoute(e,t,r){r||(r=t,t=null),u.validate.object(e)||(0,u.showError)("addRoute() invalid route"),u.validate.string(e.url)||(0,u.showError)('addRoute() invalid route "url"'),e.url=e.url.replace(/\/+$/g,""),e.method&&(u.validate.string(e.method)||(0,u.showError)('addRoute() invalid route "method"'),e.method=e.method.toUpperCase()),void 0===e.match||u.validate.object(e.match)||(0,u.showError)('addRoute() invalid route "match"'),void 0===e.query||u.validate.object(e.query)||(0,u.showError)('addRoute() invalid route "query"'),void 0===e.fileParsing||u.validate.bool(e.fileParsing)||(0,u.showError)('addRoute() invalid route "fileParsing"'),e.id=(0,l.nanoid)(),this._router.addRoute(e,r),this._router.layers.addLocal(e.id,t)}useLayer(e){this._router.layers.addGlobal(e)}finishRequest(){if(!this._settings.debug)return;if(!this._req||!this._req.url||!this._req.startTime)return;const e=Date.now()-this._req.startTime;console.log(`${s.default.gray(this._req.url)} ${s.default.cyan(e+"ms")}`)}}},482:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(i,n){function s(e){try{a(o.next(e))}catch(e){n(e)}}function l(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r(593);t.default=class{constructor(){this.locals=[],this.globals=[]}addLocal(e,t){if(e||(0,i.showError)("addLocal() invalid route id"),!t)return;const r={id:e,layers:[]};t.forEach((e=>{"function"!=typeof e&&(0,i.showError)("addLocal() need function for middleware layer"),e.length&&3===e.length||(0,i.showError)("addLocal() invalid function arguments"),r.layers.push(e)})),this.locals.push(r)}addGlobal(e){e&&e.forEach((e=>{"function"!=typeof e&&(0,i.showError)("addGlobal() need function for middleware layer"),e.length&&3===e.length||(0,i.showError)("addGlobal() invalid function arguments"),this.globals.push(e)}))}applyLocal(e,t,r){return o(this,void 0,void 0,(function*(){e||(0,i.showError)("applyLocal() invalid route id");const o=[];for(let i=0;i<this.locals.length;i++)if(this.locals[i].id===e)for(let e=0;e<this.locals[i].layers.length;e++)o.push(new Promise(((o,n)=>{this.locals[i].layers[e](t,r,(e=>{e?n(e):o(null)}))})));yield Promise.all(o)}))}applyGlobal(e,t){return o(this,void 0,void 0,(function*(){const r=[];for(let o=0;o<this.globals.length;o++)r.push(new Promise(((r,i)=>{this.globals[o](e,t,(e=>{e?i(e):r(null)}))})));yield Promise.all(r)}))}applyLayers(e,t,r){return o(this,void 0,void 0,(function*(){yield this.applyLocal(e,t,r),yield this.applyGlobal(t,r)}))}}},667:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=s(r(477)),a=n(r(593));t.default=class{constructor(e){this.fields={},this.files={},this._req=e,this.boundary=this.getBoundary(e.headers)}parseBody(){return new Promise(((e,t)=>{if(this._req.method){if(["GET","HEAD"].includes(this._req.method))return e({fields:this.fields,files:this.files});if(!["PUT","POST","DELETE"].includes(this._req.method))return t("unsupported HTTP method")}const r=/application\/json/.test(this._req.headers["content-type"]),o=/application\/x-www-form-urlencoded/.test(this._req.headers["content-type"]),i=/multipart\/form-data/.test(this._req.headers["content-type"]);if(!r&&!o&&!i)return e({fields:this.fields,files:this.files});let n;this._req.on("data",(e=>{n=n?Buffer.concat([n,e]):e})),this._req.on("end",(()=>{r?this.json(n):o?this.form(n):i&&this.multipart(n),e({fields:this.fields,files:this.files})}))}))}json(e){if(!Buffer.isBuffer(e))return;const t=e.toString("utf8");if(!a.validate.json(t))return console.error("invalid JSON");this.fields=JSON.parse(t)}form(e){if(!Buffer.isBuffer(e))return;const t=e.toString("utf8");this.fields=l.default.parse(t)}multipart(e){if(!Buffer.isBuffer(e))return;if(this._req.headers["content-type"].indexOf("boundary")<0)return console.error("invalid headers, boundary is required");const t=a.buff2arr(e),r=a.buff2arr(this.boundary),o=this.getSubPositions(t,r),i=[];for(let e=0,r=o.length;e<r;e++)void 0!==o[e].start&&void 0!==o[e].end&&void 0!==o[e+1]&&i.push(t.slice(o[e].end+1,o[e+1].start-1));for(let e=0,t=i.length;e<t;e++){const t=this.parseEachPart(i[e]);if(!t.name.length||!t.value.length)continue;const r=a.arr2buff2str(t.name);if(t.filefield.length&&t.filename.length){const e=a.arr2buff2str(t.filename);this.files[r]={name:e,ext:this.getFileExtension(e),mime:a.arr2buff2str(t.mime),body:a.arr2buff(t.value)}}else t.field.length&&t.name.length&&(this.fields[r]=a.arr2buff2str(t.value))}}getBoundary(e){return e["content-type"]?Buffer.from("--"+e["content-type"].replace(/(.*)boundary=/,"")):Buffer.from("")}getSubPositions(e,t){a.validate.array(e)||a.showError('getSubPositions() invalid "base" array'),a.validate.array(t)||a.showError('getSubPositions() invalid "sub" array');const r=[],o=e.length,i=t.length;let n,s,l=0;for(;l<o;)if(t.indexOf(e[l])<0)l++;else{n=l,s=!0;for(let r=0;r<i&&s;r++)t[r]!==e[n]?s=!1:n++;s?(r.push({start:l,end:--n}),l+=i):l++}return r}parseEachPart(e){const t={disposition:!0,field:!1,name:!1,filefield:!1,filename:!1,mime:!1,charset:!1,value:!1},r={disposition:[],field:[],name:[],filefield:[],filename:[],mime:[],charset:[],value:[]},o=34,i=122;for(let n=0,s=!1,l=e.length;n<l;n++)switch(!0){case t.disposition:if(!r.disposition.length&&58===e[n]){s=!0;continue}s&&(e[n]>=97&&e[n]<=i||45===e[n]?r.disposition.push(e[n]):59===e[n]&&(s=!1,t.disposition=!1,t.field=!0));break;case t.field:if(!(r.field.length||32!==e[n]&&61!==e[n]&&e[n]!==o))continue;e[n]>=97&&e[n]<=i?r.field.push(e[n]):(t.field=!1,t.name=!0);break;case t.name:if(!(r.name.length||61!==e[n]&&e[n]!==o))continue;e[n]===o?(t.name=!1,t.filefield=!0):r.name.push(e[n]);break;case t.filefield:if(r.filefield.length||10!==e[n]&&13!==e[n]){if(!(r.filefield.length||59!==e[n]&&32!==e[n]&&61!==e[n]&&e[n]!==o))continue;e[n]>=97&&e[n]<=i?r.filefield.push(e[n]):(t.filefield=!1,t.filename=!0)}else t.filefield=!1,t.value=!0;break;case t.filename:if(!r.filefield.length)continue;if(!(r.filename.length||61!==e[n]&&e[n]!==o))continue;e[n]===o?(t.filename=!1,t.mime=!0):r.filename.push(e[n]);break;case t.mime:if(!r.mime.length&&58===e[n]){s=!0;continue}s&&(e[n]>=97&&e[n]<=i||58===e[n]||45===e[n]||47===e[n]?r.mime.push(e[n]):59===e[n]?(s=!1,t.mime=!1,t.charset=!0):10!==e[n]&&13!==e[n]||(s=!1,t.mime=!1,t.value=!0));break;case t.charset:if(!(r.charset.length||32!==e[n]&&61!==e[n]&&e[n]!==o))continue;e[n]>=48&&e[n]<=57||e[n]>=97&&e[n]<=i||45===e[n]?r.charset.push(e[n]):10!==e[n]&&13!==e[n]||(t.charset=!1,t.value=!0);break;case t.value:if(!r.value.length&&(10===e[n]||13===e[n]))continue;r.value.push(e[n])}if(r.value.length){let e=!1,t=r.value.length;for(;!e;)t--,10===r.value[t]||13===r.value[t]?r.value.splice(t,1):e=!0}return r}getFileExtension(e){var t;return null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()}}},957:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(i,n){function s(e){try{a(o.next(e))}catch(e){n(e)}}function l(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(310)),s=i(r(482)),l=i(r(667)),a=r(593);t.default=class{constructor(){this.routes=[],this.layers=new s.default,this.parsed_all={},this.parsed_query=null,this.request_uri="",this.request_path="",this.request_method=""}addRoute(e,t){e.method||(e.method="GET"),["GET","POST","PUT","DELETE"].includes(e.method)||(0,a.showError)("addRoute() invalid method in route"),this.routes.find((t=>t.url===e.url&&t.method===e.method))&&(0,a.showError)("addRoute() duplicated url and method"),e.callback=t,this.routes.push(e)}parseQuery(e){return o(this,void 0,void 0,(function*(){if(!e.url)return null;this.parsed_query=n.default.parse(e.url,!0),this.request_uri=this.parsed_query.href,this.request_path=this.parsed_query.pathname||"",this.request_method=e.method||"GET";const t=this.matchUrl();if(!t)return null;if(e.route=Object.assign({},t),delete e.route.callback,e.query={},e.files={},e.params={},!t.fileParsing)return t;const r=new l.default(e),{fields:o,files:i}=yield r.parseBody();return this.parsed_all=Object.assign(Object.assign({},this.parsed_query.query),o),e.query=this.parsed_all,e.files=i,e.params=this.getParams(t.url),this.setBasicData(e),t}))}matchUrl(){for(let e=0;e<this.routes.length;e++)if(this.isMatch(this.routes[e].url,this.routes[e].match,this.routes[e].method))return this.routes[e]}isMatch(e,t={},r){/\?/.test(e)&&(e=e.replace("?","\\?")),(e.match(/{([a-z_]{1,50})}/gi)||[]).forEach((r=>{let o=r.replace(/({})/g,"");e=t[o]?e.replace(r,(0,a.val2regexp)(t[o])):e.replace(r,"([a-zA-Z0-9-_%.]{1,100})")}));const o=new RegExp("^"+e+"/?$","g");let i=this.request_path;return/\/$/.test(i)||(i+="/"),i.match(o)&&r===this.request_method}getParams(e){const t={},r=e.split("/"),o=this.request_path.split("/");for(let e=0;e<r.length;e++){let i=r[e];/({})/.test(i)&&(i=i.replace(/({})/g,""),o[e]&&!t[i]&&(t[i]=o[e]))}return t}setBasicData(e){e.client_ip=e.headers["x-real-ip"]||e.headers["x-forwarded-for"]||e.connection.remoteAddress||e.socket.remoteAddress,e.referer=e.headers.referer?n.default.parse(e.headers.referer,!0):null}}},607:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(r(639));e.exports=i.default},593:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.arr2buff2str=t.arr2buff=t.buff2arr=t.val2regexp=t.validate=t.showError=void 0;const i=o(r(6));t.showError=e=>{console.error(i.default.red(e.stack||e)),process.exit(1)},t.validate={json:e=>{try{JSON.parse(e)}catch(e){return!1}return!0},object:e=>!!e&&"[object Object]"===Object.prototype.toString.call(e)&&e instanceof Object,array:e=>"[object Array]"===Object.prototype.toString.call(e),string:e=>"string"==typeof e,integer:e=>"number"==typeof e,bool:e=>!0===e||!1===e},t.val2regexp=e=>t.validate.string(e)?e:t.validate.array(e)?"("+e.join("|")+")":"",t.buff2arr=e=>{Buffer.isBuffer(e)||t.showError("buff2arr() invalid buffer");const r=[];let o=e.length;for(;o--;)r.push(e[o]);return r.reverse(),r},t.arr2buff=e=>(t.validate.array(e)||t.showError("arr2buff() invalid array"),Buffer.from(e)),t.arr2buff2str=e=>t.arr2buff(e).toString()},685:e=>{e.exports=require("http")},477:e=>{e.exports=require("querystring")},310:e=>{e.exports=require("url")},6:(e,t,r)=>{r.r(t),r.d(t,{Chalk:()=>T,chalkStderr:()=>S,default:()=>L,supportsColor:()=>m,supportsColorStderr:()=>v});const o=(e=0)=>t=>`[${t+e}m`,i=(e=0)=>t=>`[${38+e};5;${t}m`,n=(e=0)=>(t,r,o)=>`[${38+e};2;${t};${r};${o}m`,s=function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[r,o]of Object.entries(t)){for(const[r,i]of Object.entries(o))t[r]={open:`[${i[0]}m`,close:`[${i[1]}m`},o[r]=t[r],e.set(i[0],i[1]);Object.defineProperty(t,r,{value:o,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi=o(),t.color.ansi256=i(),t.color.ansi16m=n(),t.bgColor.ansi=o(10),t.bgColor.ansi256=i(10),t.bgColor.ansi16m=n(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=[...r].map((e=>e+e)).join(""));const o=Number.parseInt(r,16);return[o>>16&255,o>>8&255,255&o]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value:e=>{if(e<8)return 30+e;if(e<16)return e-8+90;let t,r,o;if(e>=232)t=(10*(e-232)+8)/255,r=t,o=t;else{const i=(e-=16)%36;t=Math.floor(e/36)/5,r=Math.floor(i/6)/5,o=i%6/5}const i=2*Math.max(t,r,o);if(0===i)return 30;let n=30+(Math.round(o)<<2|Math.round(r)<<1|Math.round(t));return 2===i&&(n+=60),n},enumerable:!1},rgbToAnsi:{value:(e,r,o)=>t.ansi256ToAnsi(t.rgbToAnsi256(e,r,o)),enumerable:!1},hexToAnsi:{value:e=>t.ansi256ToAnsi(t.hexToAnsi256(e)),enumerable:!1}}),t}(),l=s,a=require("node:process"),u=require("node:os"),c=require("node:tty");function f(e,t=a.argv){const r=e.startsWith("-")?"":1===e.length?"-":"--",o=t.indexOf(r+e),i=t.indexOf("--");return-1!==o&&(-1===i||o<i)}const{env:d}=a;let h;function p(e,t={}){return 0!==(r=function(e,{streamIsTTY:t,sniffFlags:r=!0}={}){const o=function(){if("FORCE_COLOR"in d)return"true"===d.FORCE_COLOR?1:"false"===d.FORCE_COLOR?0:0===d.FORCE_COLOR.length?1:Math.min(Number.parseInt(d.FORCE_COLOR,10),3)}();void 0!==o&&(h=o);const i=r?h:o;if(0===i)return 0;if(r){if(f("color=16m")||f("color=full")||f("color=truecolor"))return 3;if(f("color=256"))return 2}if(e&&!t&&void 0===i)return 0;const n=i||0;if("dumb"===d.TERM)return n;if("win32"===a.platform){const e=u.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in d)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some((e=>e in d))||"codeship"===d.CI_NAME?1:n;if("TEAMCITY_VERSION"in d)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(d.TEAMCITY_VERSION)?1:0;if("TF_BUILD"in d&&"AGENT_NAME"in d)return 1;if("truecolor"===d.COLORTERM)return 3;if("TERM_PROGRAM"in d){const e=Number.parseInt((d.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(d.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(d.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(d.TERM)||"COLORTERM"in d?1:n}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3};var r}f("no-color")||f("no-colors")||f("color=false")||f("color=never")?h=0:(f("color")||f("colors")||f("color=true")||f("color=always"))&&(h=1);const g={stdout:p({isTTY:c.isatty(1)}),stderr:p({isTTY:c.isatty(2)})};function b(e,t,r){let o=e.indexOf(t);if(-1===o)return e;const i=t.length;let n=0,s="";do{s+=e.substr(n,o-n)+t+r,n=o+i,o=e.indexOf(t,n)}while(-1!==o);return s+=e.slice(n),s}const{stdout:m,stderr:v}=g,y=Symbol("GENERATOR"),_=Symbol("STYLER"),O=Symbol("IS_EMPTY"),E=["ansi","ansi","ansi256","ansi16m"],w=Object.create(null);class T{constructor(e){return R(e)}}const R=e=>{const t=(...e)=>e.join(" ");return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const r=m?m.level:0;e.level=void 0===t.level?r:t.level})(t,e),Object.setPrototypeOf(t,j.prototype),t};function j(e){return R(e)}Object.setPrototypeOf(j.prototype,Function.prototype);for(const[e,t]of Object.entries(l))w[e]={get(){const r=M(this,B(t.open,t.close,this[_]),this[O]);return Object.defineProperty(this,e,{value:r}),r}};w.visible={get(){const e=M(this,this[_],!0);return Object.defineProperty(this,"visible",{value:e}),e}};const P=(e,t,r,...o)=>"rgb"===e?"ansi16m"===t?l[r].ansi16m(...o):"ansi256"===t?l[r].ansi256(l.rgbToAnsi256(...o)):l[r].ansi(l.rgbToAnsi(...o)):"hex"===e?P("rgb",t,r,...l.hexToRgb(...o)):l[r][e](...o),q=["rgb","hex","ansi256"];for(const e of q)w[e]={get(){const{level:t}=this;return function(...r){const o=B(P(e,E[t],"color",...r),l.color.close,this[_]);return M(this,o,this[O])}}},w["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const{level:t}=this;return function(...r){const o=B(P(e,E[t],"bgColor",...r),l.bgColor.close,this[_]);return M(this,o,this[O])}}};const x=Object.defineProperties((()=>{}),{...w,level:{enumerable:!0,get(){return this[y].level},set(e){this[y].level=e}}}),B=(e,t,r)=>{let o,i;return void 0===r?(o=e,i=t):(o=r.openAll+e,i=t+r.closeAll),{open:e,close:t,openAll:o,closeAll:i,parent:r}},M=(e,t,r)=>{const o=(...e)=>A(o,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(o,x),o[y]=e,o[_]=t,o[O]=r,o},A=(e,t)=>{if(e.level<=0||!t)return e[O]?"":t;let r=e[_];if(void 0===r)return t;const{openAll:o,closeAll:i}=r;if(t.includes(""))for(;void 0!==r;)t=b(t,r.close,r.open),r=r.parent;const n=t.indexOf("\n");return-1!==n&&(t=function(e,t,r,o){let i=0,n="";do{const s="\r"===e[o-1];n+=e.substr(i,(s?o-1:o)-i)+t+(s?"\r\n":"\n")+r,i=o+1,o=e.indexOf("\n",i)}while(-1!==o);return n+=e.slice(i),n}(t,i,o,n)),o+t+i};Object.defineProperties(j.prototype,w);const C=j(),S=j({level:v?v.level:0}),L=C},987:(e,t,r)=>{r.r(t),r.d(t,{customAlphabet:()=>c,customRandom:()=>u,nanoid:()=>f,random:()=>a,urlAlphabet:()=>i});const o=require("crypto"),i="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let n,s,l=e=>{!n||n.length<e?(n=Buffer.allocUnsafe(128*e),(0,o.randomFillSync)(n),s=0):s+e>n.length&&((0,o.randomFillSync)(n),s=0),s+=e},a=e=>(l(e-=0),n.subarray(s-e,s)),u=(e,t,r)=>{let o=(2<<31-Math.clz32(e.length-1|1))-1,i=Math.ceil(1.6*o*t/e.length);return(n=t)=>{let s="";for(;;){let t=r(i),l=i;for(;l--;)if(s+=e[t[l]&o]||"",s.length===n)return s}}},c=(e,t=21)=>u(e,t,a),f=(e=21)=>{l(e-=0);let t="";for(let r=s-e;r<s;r++)t+=i[63&n[r]];return t}}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}return r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(607)})()));